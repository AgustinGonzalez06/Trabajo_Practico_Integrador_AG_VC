<!DOCTYPE html>
<html lang="es">
  <%- include('../Partials/header', { titulo: 'Alta de Producto' }) %>
<body>

  <main class="formulario-producto">
    <h1>Agregar nuevo producto</h1>

    <% if (errores && errores.length > 0) { %>
      <ul class="errores">
        <% errores.forEach(err => { %>
          <li><%= err.msg %></li>
        <% }) %>
      </ul>
    <% } %>

    <form action="/admin/agregar" method="POST" enctype="multipart/form-data">
      <label for="nombre">Nombre:</label>
      <input type="text" name="nombre" id="nombre" required minlength="3" maxlength="100" value="<%= datos?.nombre || '' %>" />

      <label for="precio">Precio:</label>
      <input type="number" name="precio" id="precio" required min="1" step="1" value="<%= datos?.precio || '' %>" />

      <label for="categoria">Categoría:</label>
      <select name="categoria" id="categoria" required>
        <option value="moneda" <%= datos?.categoria === 'moneda' ? 'selected' : '' %>>Moneda</option>
        <option value="skin" <%= datos?.categoria === 'skin' ? 'selected' : '' %>>Skin</option>
      </select>

      <label for="subcategoria">Subcategoría:</label>
      <select name="subcategoria" id="subcategoria" required>
        <% if (datos?.categoria === 'moneda') { %>
          <option value="vp" <%= datos?.subcategoria === 'vp' ? 'selected' : '' %>>VP</option>
          <option value="rp" <%= datos?.subcategoria === 'rp' ? 'selected' : '' %>>RP</option>
          <option value="radiant" <%= datos?.subcategoria === 'radiant' ? 'selected' : '' %>>Radiant</option>
        <% } else if (datos?.categoria === 'skin') { %>
          <option value="selecta" <%= datos?.subcategoria === 'selecta' ? 'selected' : '' %>>Selecta</option>
          <option value="deluxe" <%= datos?.subcategoria === 'deluxe' ? 'selected' : '' %>>Deluxe</option>
          <option value="premium" <%= datos?.subcategoria === 'premium' ? 'selected' : '' %>>Premium</option>
          <option value="ultra" <%= datos?.subcategoria === 'ultra' ? 'selected' : '' %>>Ultra</option>
          <option value="exclusive" <%= datos?.subcategoria === 'exclusive' ? 'selected' : '' %>>Exclusive</option>
        <% } else { %>
          <option value="" disabled selected>Seleccione categoría primero</option>
        <% } %>
      </select>

      <label for="img">Imagen del producto:</label>
      <input type="file" name="img" id="img" accept="image/*" required />

      <button type="submit">Agregar producto</button>
    </form>

    <a href="/admin/dashboard">⬅️ Volver al dashboard</a>
  </main>

  <%- include('../Partials/footer') %>
  <%- include('../Partials/scripts') %>
</body>
</html>
